<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
<title>Tensorflow利用inception_v3模型和retrain实现图像分类训练 - buzi</title>
<meta name="description" content="记录平凡的修炼之路">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link type='text/css' rel='stylesheet' href='https://littlebuzi.github.io//styles/main.css' media='screen' />
<link type="text/css" rel="stylesheet" href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css">
<link type="text/css" rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">

<script type="text/javascript" src='https://littlebuzi.github.io//media/scripts/jquery.js'></script>
<script type="text/javascript" src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>

<script>
    hljs.initHighlightingOnLoad();
</script>
</head>

<body>
  <div class="layout theme-dark">
    <div class="layout-header">

	<div class="layout-header-main">
		<div class="container">
			<div class="row justify-content-lg-center">
				<div class="col-12 col-lg-9">

					<div class="navbar">

						<div class="logo">
							<a href="https://littlebuzi.github.io/">
								<img class="logo"
									src="https://littlebuzi.github.io//media/images/site_avatar.png?v=1591627684417"
									alt="">
							</a>
						</div>

						<div class="menu d-md-inline-block d-none">
							<ul class="layout-navigation-list">
								
								<li class="layout-navigation-item"><a title="首页"
										href="/">首页</a>
								</li>
								
								<li class="layout-navigation-item"><a title="时间线"
										href="/archives">时间线</a>
								</li>
								
								<li class="layout-navigation-item"><a title="分类"
										href="/tags">分类</a>
								</li>
								
								<li class="layout-navigation-item"><a title="关于"
										href="https://littlebuzi.github.io/about">关于</a>
								</li>
								
							</ul>
						</div>

						<div class="item d-md-inline-block d-none">
							<div class="search-icon">
								<i class="fa fa-search" aria-hidden="true"></i>
							</div>
						</div>



						<div class="d-md-inline-block d-none">
							<div class="search-lightbox">
								<div class="search-body">

									<form id="gridea-search-form" data-update="1591627684417" action="/search/" class="search-form">
										<input type="text" name="q" id="s" value="" class="search-field" placeholder="请输入搜索关键词" aria-label="请输入搜索关键词" required="">
										<button type="submit" class="submit" aria-label="Submit">
											<i class="fa fa-search" aria-hidden="true"></i>
										</button>
									</form>

								</div>
							</div>
						</div>

						<div class="nav d-md-none d-inline-block">
							<div class="trigger">
								<i class="fa fa-bars layout-btn-toggle" aria-hidden="true"></i>
							</div>
						</div>

					</div>

				</div>
			</div>




		</div>
	</div>

</div>
    <div class="layout-collapse d-md-none">
	<div class="layout-collapse-main">
		<ul class="layout-collapse-list">
			
			<li class="layout-collapse-item"><a title="首页" href="/">首页</a></li>
			
			<li class="layout-collapse-item"><a title="时间线" href="/archives">时间线</a></li>
			
			<li class="layout-collapse-item"><a title="分类" href="/tags">分类</a></li>
			
			<li class="layout-collapse-item"><a title="关于" href="https://littlebuzi.github.io/about">关于</a></li>
			

		</ul>
	</div>
</div>

    <div class="layout-content">
      <div class="layout-content-main">
        <div class="container">
          <div class="row justify-content-lg-center">
            <div class="col-12 col-lg-9">
              <div class="layout-post">
                <div class="layout-post-body">
                  <div class="row">

                    <div class="col-12 col-lg-10">
                      <div class="layout-post-main m-right m-md-right">
                        <div class="layout-post-header">
                          <h1 class="layout-post-title">Tensorflow利用inception_v3模型和retrain实现图像分类训练</h1>
                          <div class="layout-post-meta">
                            <div class="item">
                               <a href="https://littlebuzi.github.io/nKWkHExQP" class="post--keyword"
                                data-title="python" data-type="post_tag" data-term-id="39">python</a>
                              
                            </div>
                            <div class="item">
                              <span>2020-02-15</span>
                            </div>
                          </div>
                        </div>
                        <div class="layout-post-content">
                          <div class="layout-post-item">
                            
                            <p class="with-img"><img src="https://littlebuzi.github.io//post-images/tensorflow2.png"
                                class="attachment-full size-full wp-post-image" alt="Tensorflow利用inception_v3模型和retrain实现图像分类训练" /></p>
                            
                            <p>参考文献：<br>
https://blog.csdn.net/ZeyiRTangent/article/details/87886445</p>
<p>#准备：</p>
<p>1.五个分类好存有各自类别的文件夹【文件夹及其内图片的名称全小写，绝对路径名中不能包含中文】</p>
<p>2.inception_v3模型下载，无需解压【http://download.tensorflow.org/models/image/imagenet/inception-2015-12-05.tgz】</p>
<p>3.克隆/下载 https://github.com/tensorflow/tensorflow &amp; https://github.com/tensorflow/hub （在~hub-master\examples\image_retraining中找到retrain.py文件，待会需要定位文件位置）</p>
<p>。。。</p>
<hr>
<h1 id="可能遇到的问题">可能遇到的问题：</h1>
<ol>
<li></li>
</ol>
<p>查看Windows下TensorFlow对python版本的要求<br>
https://blog.csdn.net/sinat_23619409/article/details/84202596</p>
<ol start="2">
<li></li>
</ol>
<p>windows10 conda python多版本切换<br>
https://www.cnblogs.com/simuhunluo/p/8540459.html</p>
<ol start="3">
<li></li>
</ol>
<p>windows 怎么更新 Python 版本（现有 Python 版本装了很多库）卸载重装，工作量就大了，有没有什么直接更新的方式，不会删库那种办法<br>
https://www.v2ex.com/amp/t/477473</p>
<ol start="4">
<li></li>
</ol>
<p>conda（anaconda）删除清华源，改回原源<br>
https://blog.csdn.net/qinglingLS/article/details/89363368</p>
<ol start="5">
<li></li>
</ol>
<p>PackagesNotFoundError: The following packages are not available from current channels:<br>
https://blog.csdn.net/miao0967020148/article/details/85230430</p>
<ol start="6">
<li></li>
</ol>
<p>迁移学习关于下载不了inception-v3，自己网络又加载不了的问题<br>
https://blog.csdn.net/nationalline450/article/details/82085007</p>
<p>原址：<br>
https://tfhub.dev/google/imagenet/inception_v3/feature_vector/3</p>
<ol start="7">
<li></li>
</ol>
<p>出现以下报错：</p>
<pre><code class="language-python">Warning! ***HDF5 library version mismatched error***
The HDF5 header files used to compile this application do not match
the version used by the HDF5 library to which this application is linked.
Data corruption or segmentation faults may occur if the application continues.
This can happen when an application was compiled by one version of HDF5 but
linked with a different version of static or shared HDF5 library.
You should recompile the application or check your shared library related
settings such as 'LD_LIBRARY_PATH'.
You can, at your own risk, disable this warning by setting the environment
variable 'HDF5_DISABLE_VERSION_CHECK' to a value of '1'.
Setting it to 2 or higher will suppress the warning messages totally.
Headers are 1.10.4, library is 1.10.5
        SUMMARY OF THE HDF5 CONFIGURATION
        =================================

General Information:
-------------------
                   HDF5 Version: 1.10.5
                  Configured on: 2019-03-04
  
... ... ... 
... ... ... 
 
          Function Stack Tracing: OFF
       Strict File Format Checks: OFF
    Optimization Instrumentation:
Bye...

</code></pre>
<p>（多版本导致冲突）pip uninstall h5py<br>
Ubuntu: HDF5报错: HDF5 header version与HDF5 library不匹配<br>
https://www.cnblogs.com/platero/p/4077934.html</p>
<p>Python环境中HDF5报错：HDF5 library version mismatched error<br>
https://blog.csdn.net/zhaoyin214/article/details/104095227</p>
<p>使用conda装完plt/pillow后，错误又出来了，详细看，conda在安装pillow时帮你安装hdf5版本了：<br>
再卸载一次h5py，然后可能提示：</p>
<p>ModuleNotFoundError: No module named 'matplotlib' ， python导入'matplotlib'包报错</p>
<p>解决：https://blog.csdn.net/weixin_43670105/article/details/87911820</p>
<p>【不能解决】 UserWarning: h5py is running against HDF5 1.10.2 when it was built against 1.10.3, this may ca...<br>
https://www.jianshu.com/p/c248bbea1da7</p>
<ol start="8">
<li></li>
</ol>
<p>tensorflow版本：2.0过高怎么办？</p>
<p>解决：</p>
<p>适当回退tensorflow版本：<br>
pip install tensorflow==1.13.1</p>
<p>安装Tensorflow 2.0后的坑has no attribute 'contrib'<br>
https://blog.51cto.com/cfy10/2446977?source=dra</p>
<p>ModuleNotFoundError: No module named 'tensorflow.contrib.rnn'<br>
https://blog.csdn.net/u014742995/article/details/86496292</p>
<ol start="9">
<li></li>
</ol>
<p>提示python版本过高、冲突（tensorflow版本）怎么办？</p>
<p>conda install python=3.6</p>
<p>Anaconda中将python 3.7版本退回python 3.6版本<br>
https://blog.csdn.net/Fhujinwu/article/details/85851587</p>
<p>遇到 label xxx no image found 类问题：<br>
如 提示：</p>
<pre><code>CRITICAL:tensorflow:Label 51 has no images in the category validation.
Tensorflow - No valid folders of images found at XXXXX #10104
ERROR:tensorflow:No valid folders of images found at
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://littlebuzi.github.io//post-images/1584022703568.PNG" alt="" loading="lazy"></figure>
<p>https://github.com/tensorflow/tensorflow/issues/10104<br>
http://www.codeclip.com/4141.html</p>
<h1 id="参考文献">参考文献：</h1>
<p>https://blog.csdn.net/ZeyiRTangent/article/details/87886445</p>
<h1 id="相似推荐有助思考">相似推荐，有助思考：</h1>
<p>https://blog.csdn.net/weixin_38663832/article/details/80555341<br>
https://blog.csdn.net/EZ_guachong/article/details/90048846<br>
https://github.com/sourcedexter/tfClassifier<br>
https://stackoverflow.com/questions/45076911/tensorflow-failed-to-create-a-newwriteablefile-when-retraining-inception</p>
<h2 id="迁移学习">迁移学习</h2>
<p>https://blog.csdn.net/chaipp0607/article/details/73380390<br>
https://blog.csdn.net/Night___Raid/article/details/102975023</p>

                          </div>
                        </div>
                        <div class="layout-post-social">
                          <div class="item reader">
                            <div id="/post/tensorflow2/" class="leancloud-visitors view"
                              data-flag-title="Tensorflow利用inception_v3模型和retrain实现图像分类训练">
                              <span class="post-meta-item-text">阅读 </span>
                              <span class="leancloud-visitors-count"></span>
                            </div>
                          </div>
                        </div>

                        <div class="layout-post-navigation">
                          <div class="navigation-list">
                            
                            <div class="post-card row">
                              
                              <div class="card-content col-8 col-md-9">
                                <div class="card-body">
                                  <div class="header">
                                    <a href="https://littlebuzi.github.io/php_jicao_1" class="title">
                                      <h4>PHP、JS、CSS基操</h4>
                                    </a>
                                  </div>
                                  <div class="inner d-none d-sm-block">
                                    <div class="abstract">
                                      
                                    </div>
                                  </div>
                                </div>
                                <div class="card-footer">
                                  <div class="item"><span>上一篇</span></div>
                                  <div class="item">2020-02-18</div>
                                </div>
                              </div>
                              <div class="card-thumb col-4 col-md-3">
                                <div class="thumb">
                                  <a href="https://littlebuzi.github.io/php_jicao_1"
                                    style="background-image: url('https://littlebuzi.github.io//post-images/php_jicao_1.jpg');"></a>
                                </div>
                              </div>
                              
                            </div>

                            <div class="post-card row">
                              
                              <div class="card-content col-8 col-md-9">
                                <div class="card-body">
                                  <div class="header">
                                    <a href="https://littlebuzi.github.io/tensorflow3" class="title">
                                      <h4>TensorFlow支持的动漫人物识别网站的存储库</h4>
                                    </a>
                                  </div>
                                  <div class="inner d-none d-sm-block">
                                    <div class="abstract">
                                      
                                    </div>
                                  </div>
                                </div>
                                <div class="card-footer">
                                  <div class="item"><span>下一篇</span></div>
                                  <div class="item">2020-02-15</div>
                                </div>
                              </div>
                              <div class="card-thumb col-4 col-md-3">
                                <div class="thumb">
                                  <a href="https://littlebuzi.github.io/tensorflow3"
                                    style="background-image: url('https://littlebuzi.github.io//post-images/tensorflow3.jpg');"></a>
                                </div>
                              </div>
                              
                            </div>

                            
                          </div>
                        </div>

                        <div class="layout-comments"></div>
                        
                      </div>
                    </div>

                    <div class="col-12 col-lg-2 d-none d-lg-block">
                      <div class="layout-post-sidebar">
                        <div class="layout-sidebar-item">
                          <ul class="markdownIt-TOC">
<li><a href="#%E5%8F%AF%E8%83%BD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98">可能遇到的问题：</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE">参考文献：</a></li>
<li><a href="#%E7%9B%B8%E4%BC%BC%E6%8E%A8%E8%8D%90%E6%9C%89%E5%8A%A9%E6%80%9D%E8%80%83">相似推荐，有助思考：</a>
<ul>
<li><a href="#%E8%BF%81%E7%A7%BB%E5%AD%A6%E4%B9%A0">迁移学习</a></li>
</ul>
</li>
</ul>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="layout-totop d-none"><i class="fa fa-angle-up" aria-hidden="true"></i></div>

    	<div class="layout-footer">

		<div class="container">
			<div class="row justify-content-lg-center">
				<div class="col-12 col-lg-9">
					<div class="footer">
						<div class="row">
							<div class="col-12 col-md-9">
								<div class="footer-copy">
									
									Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
									<div class="footer-icp d-none d-sm-inline-block">
										<span class="px-2">⋅</span>
										
									</div>
								</div>
							</div>
							<div class="col-sm-3 d-none d-md-block">
								<div class="footer-links">
									
									
									
									
									
									
									
									
									
									
									
									
									
									
									
									
									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>

	<script type="text/javascript" src='https://littlebuzi.github.io//media/scripts/main.js'></script>
	

  </div>
</body>

</html>